---
title: "Using reticulate's Python Engine with cache enabled"
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(cache = TRUE)
```

Cache can handle changes to second chunk:

```{python}
x = 1

# empty file that flags the chunk was executed
open('py_chunk_executed', 'w').close()
```

```{python, cache = FALSE}
print(x + 1)
```

The `cache.vars` chunk option may be used to select only a subset of variables
from the global environment to be cached.

```{python cache-vars, cache.vars = 'x'}
x = 42
spam = "Lovely SPAM! Wonderful SPAM!"
```

In a second excution of the document, `spam` should not be present, because it wasn't saved.

```{python, cache = FALSE}
def print_globals():
    for name, value in globals().items():
        if not name.startswith('__'):
            print(name, ": ", value, sep="")
print_globals()
```
